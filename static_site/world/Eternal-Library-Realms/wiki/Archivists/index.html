<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archivists - Infinite Wiki</title>
    <link rel="icon" type="image/png" href="/infinite-wiki/static/favicon.png">
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f4f4f4;
            color: #333;
        }

        header {
            background: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        a {
            color: #0066cc;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .container {
            background: #fff;
            padding: 2rem;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .image-container {
            text-align: center;
            margin: 1rem 0;
        }

        img {
            max-width: 50%;
            height: auto;
            border-radius: 5px;
        }

        .related {
            margin-top: 2rem;
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }

        .related ul {
            list-style: none;
            padding: 0;
        }

        .related li {
            display: inline-block;
            margin-right: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
            font-style: italic;
            color: #666;
        }
    </style>
</head>

<body>
    <header>
        <h1><a href="/infinite-wiki/world/Eternal-Library-Realms" style="color: #fff;">Infinite Wiki: Eternal-Library-Realms</a>
        </h1>
        <div>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/visualizers"
                style="color: #ccc; font-size: 0.9em; margin-right: 10px;">Visualizers</a>
            <a href="/infinite-wiki/api/world/Eternal-Library-Realms/timeline_data"
                style="color: #ccc; font-size: 0.9em; margin-right: 10px;">Timeline Data</a>
            <a href="/infinite-wiki/" style="color: #ccc; font-size: 0.8em;">(Switch World)</a>
        </div>
    </header>
    <div class="container">
        
<div id="delta-alert"
    style="display: none; background-color: #d4edda; color: #155724; padding: 15px; margin-bottom: 20px; border: 1px solid #c3e6cb; border-radius: 4px;">
    <strong>Update Successful:</strong> <span id="delta-msg"></span>
</div>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const delta = urlParams.get('delta');
    if (delta) {
        document.getElementById('delta-msg').textContent = delta;
        document.getElementById('delta-alert').style.display = 'block';
        // Clean URL
        window.history.replaceState({}, document.title, window.location.pathname);
    }
</script>
<div style="display: flex; justify-content: space-between; align-items: center;">
    <h2>Archivists</h2>
    <div style="display: flex; gap: 10px;">
        <button onclick="extractEvents()" class="button"
            style="font-size: 0.8em; padding: 5px 10px; background-color: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer;">Extract
            Events</button>
        <button onclick="integrateInfo()" class="button"
            style="font-size: 0.8em; padding: 5px 10px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Integrate
            New Info</button>
        <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Archivists/edit" class="button"
            style="font-size: 0.8em; padding: 5px 10px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px;">Edit</a>
    </div>
</div>



<div class="image-container">
    <img src="/infinite-wiki/world/Eternal-Library-Realms/images/Archivists.png" alt="Archivists communing with the awakening tomes of the Eternal Library.">
    <p class="caption">Archivists communing with the awakening tomes of the Eternal Library.</p>
</div>


<div class="summary">
    <strong>Summary:</strong> The Archivists are a venerable order of guardians and scholars in the Eternal-Library-Realms, tasked with preserving and interpreting the vast knowledge of the Eternal Library since its Dormant Era. Evolving from humble scribes to attuned mediators of the Library&#39;s subtle magics post-Awakening, they navigate its labyrinthine perils to ensure the sanctity of lore amid gentle discoveries and understated trials.
</div>

<hr>

<div class="content">
    <h1><a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a></h1>
<p>The <strong><a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a></strong> are an ancient and revered order of scholars, guardians, and lore-keepers dedicated to the stewardship of the <a href="/world/Eternal-Library-Realms/wiki/Eternal%20Library">Eternal Library</a> within the Eternal-Library-Realms. Founded during the Library's Dormant Era, the order has served as the primary custodians of its infinite repositories, safeguarding knowledge against the ravages of time, entropy, and external threats. Initially emerging as a loose collective of scribes tasked with cataloging inert tomes in a silent, unchanging archive, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> underwent profound evolution following the <a href="/world/Eternal-Library-Realms/wiki/Awakening%20of%20the%20Eternal%20Archive">Awakening of the Eternal Archive</a> approximately 1,247 cycles ago. This transformative event infused the Library with subtle magics, compelling the order to adapt from passive recorders to active mediators who navigate enchanted perils, interpret sentient whispers, and balance the demands of a now-living repository. Through their rigorous traditions and unyielding commitment, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> embody the realms' ethos of cautious reverence for knowledge, ensuring its preservation amid the gentle interplay of discovery and trial.</p>
<h2>Origins in the Dormant Era</h2>
<p>The origins of the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> trace back to the primordial mists of the Dormant Era, a period spanning eons before the Awakening, when the <a href="/world/Eternal-Library-Realms/wiki/Eternal%20Library">Eternal Library</a> stood as a colossal, static vault of unyielding knowledge. Established in an epoch predating the coherent formation of the Eternal-Library-Realms, the Library was envisioned as an ultimate bulwark against the dissolution of lore, its architecture comprising endless corridors of shelves that warped spatial logic into perceptual infinities. In this era of profound stillness, the first <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> coalesced not as a formalized order but as a disparate band of intrepid wanderers—exiled academics, nomadic scribes, and solitary seekers—who braved the Library's mundane hazards to access its treasures.</p>
<p>These proto-<a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>, often drawn from the realms' nascent scholarly enclaves, began their work with rudimentary tools: quills etched from petrified bone, inks derived from mineral deposits within the Library's walls, and fragile maps sketched on salvaged parchment. Their initial efforts focused on transcribing accessible volumes—tomes on cosmology, forgotten rituals, and interstellar mechanics—into portable codices that could be disseminated to the outside world. Hereditary tendencies emerged early, with lineages forming around "anchor-points," stable sections of the Library where families established semi-permanent scriptoria. By the mid-Dormant Era, these groups had formalized into a semi-hereditary order, bound by oaths of neutrality and seclusion, viewing their role as eternal witnesses to the archive's permanence. No magic animated their labors; interactions with the Library were unilateral, demanding physical endurance against collapsing passages and the creeping isolation of endless silence, forging a culture of meticulous patience and quiet devotion.</p>
<h2>Guardians of Inert Knowledge</h2>
<p>As the Dormant Era progressed, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> solidified their identity as the preeminent guardians of the Library's inert knowledge, transforming from mere transcribers into vigilant sentinels against decay and intrusion. The Library's neutrality during this time—its texts unchanging and unresponsive—imposed a solemn duty on the order to combat natural erosion: dust storms that buried shelves, structural folds that sealed entire wings, and the slow degradation of crystalline data-orbs under temporal flux. <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> patrolled accessible domains using lantern-lit chains and echo-horns to map distortions, cataloging hazards in communal ledgers that evolved into the order's foundational archives.</p>
<p>Their guardianship extended beyond preservation to ethical curation. The <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> enforced unspoken protocols, denying access to volatile texts—such as those detailing cataclysmic wars or forbidden summonings—to prevent misuse in the realms' fractious societies. This role fostered a monastic ethos, with initiates undergoing trials of endurance, such as solitary vigils in shadowed alcoves, to prove their worthiness. Economically, the order sustained itself through bartered transcriptions, trading sanitized excerpts for supplies from external pilgrims. Culturally, they became mythic figures, revered as "shadow-keepers" in realms' folklore, their oaths symbolizing the triumph of intellect over chaos. Yet, this inert stewardship bred complacency; the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> rarely anticipated the Library's potential for change, viewing it as an immutable relic rather than a dormant force.</p>
<h2>The Stirring and Adaptation</h2>
<p>The closing cycles of the Dormant Era brought the Signs of Stirring, subtle anomalies that tested the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>' adaptability and foreshadowed the Awakening. Approximately 50 cycles prior to the event, reports of luminescent tomes and rhythmic creaks in shelves reached the order's anchor-points, initially attributed to structural fatigue or unauthorized wanderers. As an organized body, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> mobilized documentation teams, dispatching roving chroniclers equipped with scrying-quills to record phenomena like page-bound whispers in archaic tongues and elongating shadows forming glyph-like patterns.</p>
<p>These disturbances demanded rapid adaptation. Traditional mapping proved inadequate against shifting texts that rearranged into riddle-sequences overnight, prompting the development of "echo-journals"—personalized logs attuned to a scribe's intuition. Incidents of knowledge echoes, where readers hallucinated historical visions, claimed a toll; several <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> vanished into proto-perils, embryonic traps that blurred the line between reality and archival illusion. In response, the order convened the first Grand Conclaves in stable sanctums, debating the stirrings' implications and refining protocols for anomaly containment. Prophetic dreams rippling through the realms drew external scholars, forcing <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> to balance isolationist traditions with collaborative inquiries. This era of adaptation honed their resilience, transforming passive guardians into proactive interpreters, and sowed the seeds of attunement to the Library's nascent vitality.</p>
<h2>Post-Awakening Transformations</h2>
<p><a href="/world/Eternal-Library-Realms/wiki/The%20Awakening%20of%20the%20Eternal%20Archive">The Awakening of the Eternal Archive</a>, culminating in the spontaneous Ceremony 1,247 cycles ago, irrevocably transformed the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> from stewards of stasis to navigators of enchantment. Eyewitnesses among the order, preserved in scrying-crystals, described the resonant hum from the <a href="/world/Eternal-Library-Realms/wiki/Core%20Sanctum">Core Sanctum</a> infusing tomes with magic, binding knowledge to ethereal currents. The subsequent <a href="/world/Eternal-Library-Realms/wiki/Waves%20of%20Magic">Waves of Magic</a>—beginning with the <a href="/world/Eternal-Library-Realms/wiki/Illuminating%20Surge" class="new-article" data-title="Illuminating Surge">Illuminating Surge</a>—animated the Library, endowing texts with self-luminescence and responsive whispers, while shelves reshaped into adaptive mazes.</p>
<p>This shift compelled profound changes within the order. Many early <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> succumbed to the intensity, emerging from catatonia with fragmented visions of the <a href="/world/Eternal-Library-Realms/wiki/Archival%20Nexus" class="new-article" data-title="Archival Nexus">Archival Nexus</a>'s ignition. Survivors adapted by integrating magical rites into their practices: attunement meditations to harmonize with the Winds of Knowledge, and warded talismans to mitigate gentle perils like echo-madness. The order splintered briefly into factions—the Purists clinging to inert traditions and the Awakened embracing the new sentience—before reunifying under the doctrine of "balanced mediation." Post-Awakening, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> evolved into attuned mediators, their robes now woven with thread-wards that glow in the presence of illusions, and their codices enchanted to capture whispering fragments. This transformation democratized their role, drawing multiversal pilgrims whom they guided through trials, while elevating the order to a metaphysical linchpin in the realms' enchanted ecosystem.</p>
<h2>Structure and Traditions</h2>
<p>The <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>' structure reflects a blend of hierarchical discipline and decentralized autonomy, adapted to the Library's infinite expanse. At its apex sits the Conclave of Elders, a rotating council of seven senior members selected for their attunement depth, convened in the Veil-Chamber—a semi-stable nexus shielded from spatial flux. Below them, the order divides into Wings: Scribes for transcription, Wardens for peril-navigation, and Interpreters for sentience dialogue. Initiates, often realm-born aspirants, undergo the Rite of Silent Vigil—a year-long seclusion studying dormant echoes—before earning the silver quill insignia.</p>
<p>Traditions underscore the order's venerable ethos. The Oath of Inertia, sworn upon a pre-Awakening tome, binds members to neutrality, prohibiting the weaponization of lore. Annual cycles mark the Festival of Stirring Echoes, where <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> reenact the Signs through communal whisper-recitations, honoring adaptation. Attire varies by wing: Wardens don chainmail etched with runes, while Interpreters favor flowing cloaks that billow in wind-currents. Knowledge-sharing occurs via the Lattice of Bonds, a metaphysical network allowing attuned communication across distances, though it risks overload from intrusive whispers. These structures and rites ensure cohesion amid the Library's chaos, perpetuating a legacy of understated guardianship.</p>
<h2>Interactions with the Library's Sentience</h2>
<p>Post-Awakening, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>' interactions with the Library's emergent sentience form the core of their evolved mandate, bridging mortal inquiry and arcane whim. The Library, now a living entity through phenomena like the <a href="/world/Eternal-Library-Realms/wiki/Whispering%20Winds%20of%20Knowledge">Whispering Winds of Knowledge</a>, communicates via adaptive currents—ethereal streams carrying lore-fragments that respond to intent. <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>, trained in attunement, engage dialogically: posing queries that elicit swirling patterns or auditory revelations, such as winds reassembling narratives from disparate texts.</p>
<p>These exchanges are symbiotic yet fraught. Benevolent winds guide Wardens to buried indices, depositing illusory clues, while malevolent eddies test Interpreters with cognitive traps, like distorting whispers into paranoia-inducing echoes. The order employs rites—harmonic chants to align with wind-flows or anchoring stones to avert wind-binding—to navigate these perils. Interactions extend to communal rituals, where confluences of <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> summon wind-pacts for shared epiphanies, granting boons like enhanced recall. However, the sentience's inscrutability demands caution; <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> view it as a decentralized psyche, enforcing worthiness through gentle trials that reward rigor and scatter the unprepared. This mediation positions the order as the Library's mortal voice, fostering realms-wide dissemination while guarding against overreach.</p>
<h2>Enduring Legacy and Perils</h2>
<p>The <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a>' enduring legacy permeates the Eternal-Library-Realms, evolving from Dormant Era relics to post-Awakening pillars of enlightened stewardship. They have birthed institutions like the <a href="/world/Eternal-Library-Realms/wiki/Order%20of%20Awakened%20Scribes" class="new-article" data-title="Order of Awakened Scribes">Order of Awakened Scribes</a>—a specialized cadre mediating pilgrim access—and inspired cultural phenomena, such as echo-libraries mirroring the Eternal Archive in remote domains. Economically, their transcribed lore fuels trade in protective amulets and interpretive guilds, while metaphysically, their attunement weaves arcane threads into realms' fabric, enabling multiversal scholarship.</p>
<p>Yet, this legacy is shadowed by perils inherent to their charge. The Library's gentle dangers—knowledge overloads, illusory entrapments, and wind-induced madness—claim <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> annually, with "lost scribes" vanishing into uncharted wings. Internal debates rage over the sentience's agenda, with some fearing entrapment in an eternal cycle of trial. External threats, from relic-thieves exploiting winds to cosmic entropy eroding wards, compound these risks. Despite such trials, the <a href="/world/Eternal-Library-Realms/wiki/Archivists">Archivists</a> persist as vigilant harbingers, their understated trials ensuring the sanctity of lore in a realm where knowledge whispers both promise and warning, affirming their role as eternal mediators between silence and awakening.</p>
</div>

<div class="related">
    <h3>Related Entries</h3>
    <ul>
        
        <li>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Eternal Library" onclick="showLoading()">Eternal Library</a>
            <span style="font-size: 0.8em; color: #666;">(Location)</span>
        </li>
        
        <li>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Awakening of the Eternal Archive" onclick="showLoading()">Awakening of the Eternal Archive</a>
            <span style="font-size: 0.8em; color: #666;">(Event)</span>
        </li>
        
        <li>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Whispering Winds of Knowledge" onclick="showLoading()">Whispering Winds of Knowledge</a>
            <span style="font-size: 0.8em; color: #666;">(Concept)</span>
        </li>
        
        <li>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Order of Awakened Scribes" onclick="showLoading()">Order of Awakened Scribes</a>
            <span style="font-size: 0.8em; color: #666;">(Organization)</span>
        </li>
        
        <li>
            <a href="/infinite-wiki/world/Eternal-Library-Realms/wiki/Archival Nexus" onclick="showLoading()">Archival Nexus</a>
            <span style="font-size: 0.8em; color: #666;">(Concept)</span>
        </li>
        
    </ul>
</div>

<div id="loading-msg" class="loading">
    Generating content for the next entry... This might take a moment.
</div>

<!-- Select-to-Generate Feature -->
<div id="generate-ui" class="generate-ui" style="display: none;">
    <input type="text" id="gen-input" placeholder="Context (optional)..." class="gen-input">
    <button id="generate-btn" class="generate-btn">
        <span class="icon">✨</span> Generate
    </button>
</div>

<style>
    .generate-ui {
        position: absolute;
        z-index: 1000;
        background: #2c3e50;
        padding: 5px;
        border-radius: 25px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 5px;
        transition: transform 0.2s, opacity 0.2s;
    }

    .gen-input {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 14px;
        outline: none;
        width: 150px;
        transition: width 0.2s, background 0.2s;
    }

    .gen-input:focus {
        background: rgba(255, 255, 255, 0.2);
        width: 200px;
    }

    .gen-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }

    .generate-btn {
        background: #007bff;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
    }

    .generate-btn:hover {
        background: #0056b3;
    }

    /* Mobile Styles */
    @media (max-width: 768px) {
        .generate-ui.mobile-visible {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            padding: 8px;
            animation: slideUp 0.3s ease-out;
        }

        .gen-input {
            flex: 1;
            width: auto;
        }

        .gen-input:focus {
            width: auto;
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 100%);
                opacity: 0;
            }

            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }
    }

    /* Red Link Style */
    a.new-article {
        color: #dc3545;
        text-decoration: none;
        border-bottom: 1px dashed #dc3545;
    }

    a.new-article:hover {
        background-color: rgba(220, 53, 69, 0.1);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const ui = document.getElementById('generate-ui');
        const btn = document.getElementById('generate-btn');
        const input = document.getElementById('gen-input');
        const contentArea = document.querySelector('.content');

        // Prevent selection loss when clicking inside the UI, but allow input focus
        ui.addEventListener('mousedown', (e) => {
            if (e.target !== input) {
                e.preventDefault();
            }
        });

        // Handle selection changes
        document.addEventListener('selectionchange', () => {
            const selection = window.getSelection();
            const text = selection.toString().trim();

            // If user is interacting with the input, don't hide
            if (document.activeElement === input) return;

            // Hide if no text or selection is outside content area
            if (!text || !contentArea.contains(selection.anchorNode)) {
                hideUI();
                return;
            }

            // Show UI
            showUI(selection);
        });

        function showUI(selection) {
            const range = selection.getRangeAt(0);
            const rect = range.getBoundingClientRect();
            const isMobile = window.innerWidth <= 768;

            ui.style.display = 'flex';

            if (isMobile) {
                ui.classList.add('mobile-visible');
                ui.style.top = 'auto';
                ui.style.left = '50%';
            } else {
                ui.classList.remove('mobile-visible');
                // Position above the selection
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                ui.style.top = `${rect.top + scrollTop - 50}px`;
                ui.style.left = `${rect.left + (rect.width / 2) - (ui.offsetWidth / 2)}px`;
            }
        }

        function hideUI() {
            ui.style.display = 'none';
            ui.classList.remove('mobile-visible');
            input.value = ''; // Clear input on hide
        }

        // Handle click
        btn.addEventListener('click', async (e) => {
            e.preventDefault();
            e.stopPropagation();

            const selection = window.getSelection();
            const text = selection.toString().trim();
            const description = input.value.trim();

            if (text) {
                // Clean text: remove non-alphanumeric chars from ends
                const cleanText = text.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g, '');

                if (cleanText) {
                    // Show loading state
                    btn.innerHTML = '<span class="spinner" style="width:16px;height:16px;border:2px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin 1s linear infinite;"></span>';
                    btn.disabled = true;

                    // Submit via Form Data to create_custom
                    const formData = new FormData();
                    formData.append('title', cleanText);
                    if (description) {
                        formData.append('description', description);
                    }

                    try {
                        const response = await fetch('/infinite-wiki/world/Eternal-Library-Realms/create_custom', {
                            method: 'POST',
                            body: formData
                        });

                        if (response.redirected) {
                            window.location.href = response.url;
                        } else {
                            // Fallback if no redirect (shouldn't happen with current backend)
                            window.location.href = `/infinite-wiki/world/Eternal-Library-Realms/wiki/${encodeURIComponent(cleanText)}`;
                        }
                    } catch (err) {
                        console.error("Generation failed:", err);
                        btn.innerHTML = 'Error';
                        setTimeout(() => {
                            btn.innerHTML = '<span class="icon">✨</span> Generate';
                            btn.disabled = false;
                        }, 2000);
                    }
                }
            }
        });

        // Add spin animation if not present
        if (!document.getElementById('spin-style')) {
            const style = document.createElement('style');
            style.id = 'spin-style';
            style.textContent = '@keyframes spin { to { transform: rotate(360deg); } }';
            document.head.appendChild(style);
        }
    });

    // Delegate event listener for red links (since they are dynamically inserted)
    document.addEventListener('click', async (e) => {
        if (e.target.matches('a.new-article')) {
            e.preventDefault();
            const title = e.target.dataset.title;
            const description = prompt(`Create new article: "${title}"?\n\nEnter optional instructions/context for the AI:`);

            if (description !== null) { // If not cancelled
                // Show loading on the link itself
                const originalText = e.target.innerText;
                e.target.innerText = "Creating...";
                e.target.style.pointerEvents = "none";

                // Submit to create_custom
                const formData = new FormData();
                formData.append('title', title);
                if (description) {
                    formData.append('description', description);
                }

                try {
                    const response = await fetch('/infinite-wiki/world/Eternal-Library-Realms/create_custom', {
                        method: 'POST',
                        body: formData
                    });

                    if (response.redirected) {
                        window.location.href = response.url;
                    } else {
                        window.location.href = `/infinite-wiki/world/Eternal-Library-Realms/wiki/${encodeURIComponent(title)}`;
                    }
                } catch (err) {
                    alert("Creation failed: " + err);
                    e.target.innerText = originalText;
                    e.target.style.pointerEvents = "auto";
                }
            }
        }
    });

    async function extractEvents() {
        if (!confirm("This will analyze the article to extract and graph historical events. Continue?")) return;

        const btn = document.querySelector('button[onclick="extractEvents()"]');
        const originalText = btn.innerText;
        btn.innerText = "Extracting...";
        btn.disabled = true;

        try {
            const response = await fetch('/infinite-wiki/world/Eternal-Library-Realms/wiki/Archivists/extract_events', {
                method: 'POST'
            });

            if (response.redirected) {
                window.location.href = response.url;
            } else {
                window.location.reload();
            }
        } catch (err) {
            alert("Extraction failed: " + err);
            btn.innerText = originalText;
            btn.disabled = false;
        }
    }

    async function integrateInfo() {
        if (!confirm("This will rewrite the article to include new information from the knowledge base. Continue?")) return;

        const btn = document.querySelector('button[onclick="integrateInfo()"]');
        const originalText = btn.innerText;
        btn.innerText = "Integrating...";
        btn.disabled = true;

        try {
            const response = await fetch('/infinite-wiki/world/Eternal-Library-Realms/wiki/Archivists/integrate', {
                method: 'POST'
            });

            if (response.redirected) {
                window.location.href = response.url;
            } else {
                window.location.reload();
            }
        } catch (err) {
            alert("Integration failed: " + err);
            btn.innerText = originalText;
            btn.disabled = false;
        }
    }
</script>

    </div>
    <script>
        function showLoading() {
            document.getElementById('loading-msg').style.display = 'block';
        }
    </script>
</body>

</html>