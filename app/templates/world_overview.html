{% extends "base.html" %}

{% block title %}{{ world_name }} - Overview{% endblock %}

{% block content %}
<div class="overview-header">
    <h2>Welcome to {{ world_name }}</h2>
    <p class="description">{{ world_config.description }}</p>
    <div class="actions">
        <a href="/world/{{ world_name }}/visualizers" class="btn">View Visualizers</a>
        <!-- Optional: Add a search or "Random Article" button later -->
    </div>
</div>

<hr>

<div class="create-section">
    <h3>Create New Article</h3>
    <form action="/world/{{ world_name }}/create_custom" method="post" class="create-form">
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required placeholder="e.g. The Great Library">
        </div>
        <div class="form-group">
            <label for="description">Description / Instructions (Optional):</label>
            <textarea id="description" name="description" rows="3"
                placeholder="Describe what this article should be about..."></textarea>
        </div>
        <button type="submit" class="btn primary">Generate Article</button>
    </form>
</div>

<hr>

<h3>Articles</h3>
{% if articles %}
<ul class="article-list">
    {% for article in articles %}
    <li>
        <a href="/world/{{ world_name }}/wiki/{{ article.title }}">{{ article.title }}</a>
        {% if article.summary %}
        <p class="article-summary">{{ article.summary[:150] }}...</p>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No articles found. <a href="/world/{{ world_name }}/wiki/Start">Create the first one!</a></p>
{% endif %}

<style>
    .overview-header {
        margin-bottom: 2rem;
    }

    .description {
        font-style: italic;
        color: #555;
    }

    .actions {
        margin-top: 1rem;
    }

    .btn {
        display: inline-block;
        padding: 8px 15px;
        background: #333;
        color: #fff;
        text-decoration: none;
        border-radius: 4px;
        font-size: 0.9em;
    }

    .btn:hover {
        background: #555;
    }

    .article-list {
        list-style: none;
        padding: 0;
    }

    .article-list li {
        margin-bottom: 1.5rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 1rem;
    }

    .article-list a {
        font-size: 1.2em;
        font-weight: bold;
    }

    .article-summary {
        color: #666;
        margin-top: 0.5rem;
        font-size: 0.95em;
    }

    .create-section {
        background: #f9f9f9;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 2rem;
    }

    .create-form .form-group {
        margin-bottom: 1rem;
    }

    .create-form label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .create-form input[type="text"],
    .create-form textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: inherit;
    }

    .btn.primary {
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
    }

    .btn.primary:hover {
        background: #0056b3;
    }
</style>
{% endblock %}