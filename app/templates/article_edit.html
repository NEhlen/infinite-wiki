{% extends "base.html" %}

{% block title %}Edit: {{ article.title }}{% endblock %}

{% block content %}
<h2>Edit Article: {{ article.title }}</h2>

{% if issues %}
<div class="validation-warning">
    <h3>Consistency Warnings Found:</h3>
    <ul>
        {% for issue in issues %}
        <li>{{ issue }}</li>
        {% endfor %}
    </ul>
    <p>Please review your changes or use "Force Save" to overwrite.</p>
</div>
{% endif %}

<form method="post" action="/world/{{ world_name }}/wiki/{{ article.title }}/edit">
    <div class="form-group">
        <textarea name="content" id="content" rows="20"
            style="width: 100%; font-family: monospace;">{{ content }}</textarea>
    </div>

    <div class="actions">
        <button type="submit" name="action" value="validate" class="btn">Save (Validate)</button>
        {% if issues %}
        <button type="submit" name="action" value="force" class="btn btn-danger">Force Save</button>
        {% endif %}
        <a href="/world/{{ world_name }}/wiki/{{ article.title }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>

<style>
    .validation-warning {
        background-color: #fff3cd;
        border: 1px solid #ffeeba;
        color: #856404;
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 5px;
    }

    .form-group {
        margin-bottom: 1rem;
    }

    .actions {
        margin-top: 1rem;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        margin-right: 10px;
        color: white;
        background-color: #007bff;
    }

    .btn-danger {
        background-color: #dc3545;
    }

    .btn-secondary {
        background-color: #6c757d;
        text-decoration: none;
        display: inline-block;
    }
</style>
{% endblock %}